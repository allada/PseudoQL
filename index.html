<!DOCTYPE html>
<html>
    <head>
        <title>PsudoQL Proof of Concept Page</title>
        <script src="https://google.github.io/traceur-compiler/bin/traceur.js"></script>
        <script src="https://google.github.io/traceur-compiler/src/bootstrap.js"></script>
    </head>
    <body>
        <textarea id="psudoql" style="width:100%;height:300px"></textarea>
        <textarea id="output" style="width:100%;height:300px"></textarea>
        <script type="module">
            import { PQL } from './pql/PQL.js';
            import { Config } from './pql/config.js';
            (() => {
                PQL.setDefaultConfig(Config);

                let psudoql_field   = document.getElementById('psudoql');
                let output_field    = document.getElementById('output');

                psudoql_field.onkeyup = function () {
                    try {
                        let query = PQL.getSQL({
                            query: psudoql_field.value,
                            table: 'order',
                            group: 'id;',
                            selects: {
                                id: 'id;'
                            },
                            orderBy: 'id;'
                        });
                        console.log(query);
                        output_field.value = query;
                    } catch (e) {
                        output_field.value = e.message || e;
                        return;
                    }
                };
            })();
        </script>
    </body>
</html>